<% layout('../layout.html') %>
<% block('title', 'Users') %>
<% block('subtitle', 'User Management') %>

<% if (flash.success) { %>
  <div class="alert alert-block alert-success">
    <button type="button" class="close" data-dismiss="alert">&times;</button>
    <h4><%- flash.success[0] %></h4>
    <%- flash.success[1] %>
  </div>
<% } %>

<% if (flash.error) { %>
  <div class="alert alert-block alert-error">
    <button type="button" class="close" data-dismiss="alert">&times;</button>
    <h4><%- flash.error[0] %></h4>
    <%- flash.error[1] %>
  </div>
<% } %>

<a href="<%= newUserPath() %>" class="btn btn-small btn-success pull-right" style="margin: 1em 0"><i class="icon-plus icon-white"></i> Add new user</a>
<div style="clear:both"></div>
<% if (! users.length) { %>
  <div class="alert alert-block alert-error">
    <h4>Whoa!</h4>
    There aren't any users to show you! But don't worry, you can create one using that big green button on the right.
  </div>
<% } else { %>
  <div class="container">
    <table class="table table-striped table-bordered table-hover">
      <thead>
        <th>Username</th>
        <th>Password</th>
        <th>First Name</th>
        <th>Last Name</th>
        <th></th>
      </thead>
      <tbody>
        <% users.forEach(function(user) { %>
          <tr>
            <td><%= user.username %></td>
            <td><%= user.password %></td>
            <td><%= user.firstname %></td>
            <td><%= user.lastname %></td>
            <td><a href="<%= editUserPath(user.id) %>" class="btn btn-inverse">Edit</a></td>
          </tr>
        <% }) %>
      </tbody>
    </table>
  </div>
<% } %>
